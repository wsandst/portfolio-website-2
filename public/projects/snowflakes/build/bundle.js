!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){return null==t?"":t}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function d(){return p(" ")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function g(t,e){t.value=null==e?"":e}let w;function b(t){w=t}function y(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const $=[],x=[],v=[],C=[],k=Promise.resolve();let S=!1;function A(t){v.push(t)}let L=!1;const R=new Set;function M(){if(!L){L=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];b(e),B(e.$$)}for(b(null),$.length=0;x.length;)x.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];R.has(e)||(R.add(e),e())}v.length=0}while($.length);for(;C.length;)C.pop()();S=!1,L=!1,R.clear()}}function B(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const j=new Set;function F(t,e){t&&t.i&&(j.delete(t),t.i(e))}function E(t,e,n,r){if(t&&t.o){if(j.has(t))return;j.add(t),undefined.c.push((()=>{j.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function P(t){t&&t.c()}function z(t,n,i,a){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,i),a||A((()=>{const n=l.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(A)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&($.push(t),S||(S=!0,k.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(e,o,i,a,s,l,u,f=[-1]){const p=w;b(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||p.$$.root};u&&u(d.root);let m=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&U(e,t)),n})):[],d.update(),m=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();o.intro&&F(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),M()}b(p)}class O{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var T=1e-6,I="undefined"!=typeof Float32Array?Float32Array:Array;function H(){var t=new I(16);return I!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var N,D=function(t,e,n,r,o,i,a){var s=1/(e-n),l=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*l,t[14]=(a+i)*c,t[15]=1,t};function W(t,e,n,r,o,i,a,s){t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.canvas.clientWidth,t.canvas.clientHeight;const l=H();D(l,0,s[0],0,s[1],.1,100);const c=H();!function(t,e,n,r){var o,i,a,s,l,c,u,f,p,d,m=e[0],_=e[1],h=e[2],g=r[0],w=r[1],b=r[2],y=n[0],$=n[1],x=n[2];Math.abs(m-y)<T&&Math.abs(_-$)<T&&Math.abs(h-x)<T?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=m-y,f=_-$,p=h-x,o=w*(p*=d=1/Math.hypot(u,f,p))-b*(f*=d),i=b*(u*=d)-g*p,a=g*f-w*u,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),s=f*a-p*i,l=p*o-u*a,c=u*i-f*o,(d=Math.hypot(s,l,c))?(s*=d=1/d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=o,t[1]=s,t[2]=u,t[3]=0,t[4]=i,t[5]=l,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=p,t[11]=0,t[12]=-(o*m+i*_+a*h),t[13]=-(s*m+l*_+c*h),t[14]=-(u*m+f*_+p*h),t[15]=1)}(c,[0,0,6],[0,0,0],[0,1,0]),function(t,e,n){var r,o,i,a,s,l,c,u,f,p,d,m,_=n[0],h=n[1],g=n[2];e===t?(t[12]=e[0]*_+e[4]*h+e[8]*g+e[12],t[13]=e[1]*_+e[5]*h+e[9]*g+e[13],t[14]=e[2]*_+e[6]*h+e[10]*g+e[14],t[15]=e[3]*_+e[7]*h+e[11]*g+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],p=e[9],d=e[10],m=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=f,t[9]=p,t[10]=d,t[11]=m,t[12]=r*_+s*h+f*g+e[12],t[13]=o*_+l*h+p*g+e[13],t[14]=i*_+c*h+d*g+e[14],t[15]=a*_+u*h+m*g+e[15])}(c,c,[o[0],o[1],0]),function(t,e,n){var r=n[0],o=n[1],i=n[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(c,c,[i,i,0]);{const r=2,o=t.FLOAT,i=!1,a=0,s=0;t.bindBuffer(t.ARRAY_BUFFER,n.position),t.vertexAttribPointer(e.attribLocations.vertexPosition,r,o,i,a,s),t.enableVertexAttribArray(e.attribLocations.vertexPosition)}{const r=4,o=t.FLOAT,i=!1,a=0,s=0;t.bindBuffer(t.ARRAY_BUFFER,n.color),t.vertexAttribPointer(e.attribLocations.vertexColor,r,o,i,a,s),t.enableVertexAttribArray(e.attribLocations.vertexColor)}t.useProgram(e.program),t.uniformMatrix4fv(e.uniformLocations.projectionMatrix,!1,l),t.uniformMatrix4fv(e.uniformLocations.modelViewMatrix,!1,c),t.uniform4fv(e.uniformLocations.hexColor,a),t.drawArrays(t.TRIANGLES,0,r)}function Y(t,e,n){t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)}function X(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}N=new I(3),I!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0);function G(e){let n,r,o;return{c(){n=u("canvas"),_(n,"class","svelte-1e74k2u")},m(t,i){l(t,n,i),e[8](n),r||(o=m(n,"mousewheel",e[1]),r=!0)},p:t,i:t,o:t,d(t){t&&c(n),e[8](null),r=!1,o()}}}function K(t,e,n){let r,o,i,a,s,l,c=0,u=[.5,.82,.96,1],f=[0,0],p=1;function d(){r.width==r.getBoundingClientRect().width&&r.height==r.getBoundingClientRect().height||m(),W(o,s,a,c,f,p,u,[r.width,r.height])}function m(){n(0,r.width=r.getBoundingClientRect().width,r),n(0,r.height=r.getBoundingClientRect().height,r),p=(r.width-10)/(l*Math.sqrt(3)),f=[5,35],o.viewport(0,0,r.width,r.height)}return y((()=>{n(0,r.width=r.getBoundingClientRect().width,r),n(0,r.height=r.getBoundingClientRect().height,r),o=r.getContext("webgl",{antialias:!0}),i=function(t,e,n){const r=X(t,t.VERTEX_SHADER,e),o=X(t,t.FRAGMENT_SHADER,n),i=t.createProgram();return t.attachShader(i,r),t.attachShader(i,o),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?i:(alert("Unable to initialize the shader program: "+t.getProgramInfoLog(i)),null)}(o,"attribute vec4 aVertexPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec4 hexColor;\n\nvarying lowp vec4 vColor;\n\nvoid main() {\n    gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n    vColor = aVertexColor * hexColor;\n}","\nvarying lowp vec4 vColor;\n\nvoid main() {\n    gl_FragColor = vColor;\n}"),s={program:i,attribLocations:{vertexPosition:o.getAttribLocation(i,"aVertexPosition"),vertexColor:o.getAttribLocation(i,"aVertexColor")},uniformLocations:{projectionMatrix:o.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:o.getUniformLocation(i,"uModelViewMatrix"),hexColor:o.getUniformLocation(i,"hexColor")}},a=function(t){return{position:t.createBuffer(),color:t.createBuffer()}}(o)})),[r,function(t){},function(t){Y(o,a.position,t),c=t.length/2},function(t){Y(o,a.color,t)},function(t,e){l=t,m()},function(t){var e=parseInt(t,16);u=[e>>16&255,e>>8&255,255&e,1],console.log(u),console.log(t)},d,function(){n(0,r.width=4e3,r),n(0,r.height=4e3,r),p=(r.width-10)/(l*Math.sqrt(3)),f=[5,35],o.viewport(0,0,r.width,r.height),W(o,s,a,c,f,p,u,[r.width,r.height]);var t=document.createElement("canvas");t.width=r.width,t.height=r.height,t.getContext("2d").drawImage(r,0,0);let e=t.toDataURL("image/png");var i=window.open();i.document.body.innerHTML='<img src="'+e+'" width="1000px" height="1000px"></img>',i.document.body.style.backgroundColor="#202020",m(),d()},function(t){x[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class J extends O{constructor(t){super(),V(this,t,K,G,i,{updatePositionBuffer:2,updateColorBuffer:3,setSimSize:4,setSimColor:5,renderFrame:6,screenshot:7})}get updatePositionBuffer(){return this.$$.ctx[2]}get updateColorBuffer(){return this.$$.ctx[3]}get setSimSize(){return this.$$.ctx[4]}get setSimColor(){return this.$$.ctx[5]}get renderFrame(){return this.$$.ctx[6]}get screenshot(){return this.$$.ctx[7]}}const Q=parseFloat;function Z(t,e=";"){let n;if(Array.isArray(t))n=t.filter((t=>t));else{n=[];for(const e in t)t[e]&&n.push(`${e}:${t[e]}`)}return n.join(e)}function tt(t){let e,n,r,o,i,u,p;function d(t,e){return"string"==typeof t[7][4]?nt:et}let m=d(t),h=m(t);return{c(){e=f("svg"),n=f("g"),r=f("g"),h.c(),_(r,"transform",t[10]),_(n,"transform",o=`translate(${t[7][0]/2} ${t[7][1]/2})`),_(n,"transform-origin",i=t[7][0]/4+" 0"),_(e,"id",t[0]),_(e,"class",u=a(t[8])+" svelte-1cj2gr0"),_(e,"style",t[9]),_(e,"viewBox",p=`0 0 ${t[7][0]} ${t[7][1]}`),_(e,"aria-hidden","true"),_(e,"role","img"),_(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){l(t,e,o),s(e,n),s(n,r),h.m(r,null)},p(t,s){m===(m=d(t))&&h?h.p(t,s):(h.d(1),h=m(t),h&&(h.c(),h.m(r,null))),1024&s&&_(r,"transform",t[10]),128&s&&o!==(o=`translate(${t[7][0]/2} ${t[7][1]/2})`)&&_(n,"transform",o),128&s&&i!==(i=t[7][0]/4+" 0")&&_(n,"transform-origin",i),1&s&&_(e,"id",t[0]),256&s&&u!==(u=a(t[8])+" svelte-1cj2gr0")&&_(e,"class",u),512&s&&_(e,"style",t[9]),128&s&&p!==(p=`0 0 ${t[7][0]} ${t[7][1]}`)&&_(e,"viewBox",p)},d(t){t&&c(e),h.d()}}}function et(t){let e,n,r,o,i,a,s,u,p,d;return{c(){e=f("path"),a=f("path"),_(e,"d",n=t[7][4][0]),_(e,"fill",r=t[3]||t[1]||"currentColor"),_(e,"fill-opacity",o=0!=t[6]?t[4]:t[5]),_(e,"transform",i=`translate(${t[7][0]/-2} ${t[7][1]/-2})`),_(a,"d",s=t[7][4][1]),_(a,"fill",u=t[2]||t[1]||"currentColor"),_(a,"fill-opacity",p=0!=t[6]?t[5]:t[4]),_(a,"transform",d=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,n){l(t,e,n),l(t,a,n)},p(t,l){128&l&&n!==(n=t[7][4][0])&&_(e,"d",n),10&l&&r!==(r=t[3]||t[1]||"currentColor")&&_(e,"fill",r),112&l&&o!==(o=0!=t[6]?t[4]:t[5])&&_(e,"fill-opacity",o),128&l&&i!==(i=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&_(e,"transform",i),128&l&&s!==(s=t[7][4][1])&&_(a,"d",s),6&l&&u!==(u=t[2]||t[1]||"currentColor")&&_(a,"fill",u),112&l&&p!==(p=0!=t[6]?t[5]:t[4])&&_(a,"fill-opacity",p),128&l&&d!==(d=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&_(a,"transform",d)},d(t){t&&c(e),t&&c(a)}}}function nt(t){let e,n,r,o;return{c(){e=f("path"),_(e,"d",n=t[7][4]),_(e,"fill",r=t[1]||t[2]||"currentColor"),_(e,"transform",o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,n){l(t,e,n)},p(t,i){128&i&&n!==(n=t[7][4])&&_(e,"d",n),6&i&&r!==(r=t[1]||t[2]||"currentColor")&&_(e,"fill",r),128&i&&o!==(o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&_(e,"transform",o)},d(t){t&&c(e)}}}function rt(e){let n,r=e[7][4]&&tt(e);return{c(){r&&r.c(),n=p("")},m(t,e){r&&r.m(t,e),l(t,n,e)},p(t,[e]){t[7][4]?r?r.p(t,e):(r=tt(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&c(n)}}}function ot(t,e,n){let r,o,i,a,{class:s=""}=e,{id:l=""}=e,{style:c=""}=e,{icon:u}=e,{size:f=""}=e,{color:p=""}=e,{fw:d=!1}=e,{pull:m=""}=e,{scale:_=1}=e,{translateX:h=0}=e,{translateY:g=0}=e,{rotate:w=""}=e,{flip:b=!1}=e,{spin:y=!1}=e,{pulse:$=!1}=e,{primaryColor:x=""}=e,{secondaryColor:v=""}=e,{primaryOpacity:C=1}=e,{secondaryOpacity:k=.4}=e,{swapOpacity:S=!1}=e;return t.$$set=t=>{"class"in t&&n(11,s=t.class),"id"in t&&n(0,l=t.id),"style"in t&&n(12,c=t.style),"icon"in t&&n(13,u=t.icon),"size"in t&&n(14,f=t.size),"color"in t&&n(1,p=t.color),"fw"in t&&n(15,d=t.fw),"pull"in t&&n(16,m=t.pull),"scale"in t&&n(17,_=t.scale),"translateX"in t&&n(18,h=t.translateX),"translateY"in t&&n(19,g=t.translateY),"rotate"in t&&n(20,w=t.rotate),"flip"in t&&n(21,b=t.flip),"spin"in t&&n(22,y=t.spin),"pulse"in t&&n(23,$=t.pulse),"primaryColor"in t&&n(2,x=t.primaryColor),"secondaryColor"in t&&n(3,v=t.secondaryColor),"primaryOpacity"in t&&n(4,C=t.primaryOpacity),"secondaryOpacity"in t&&n(5,k=t.secondaryOpacity),"swapOpacity"in t&&n(6,S=t.swapOpacity)},t.$$.update=()=>{8192&t.$$.dirty&&n(7,r=u&&u.icon||[0,0,"",[],""]),12584960&t.$$.dirty&&n(8,o=Z([s,"svelte-fa",y&&"spin",$&&"pulse"]," ")),118784&t.$$.dirty&&n(9,i=function(t,e,n,r){let o,i,a,s,l,c="-.125em";return r&&(l="center",i="1.25em"),n&&(o=n),e&&("lg"==e?(s="1.33333em",a=".75em",c="-.225em"):s="xs"==e?".75em":"sm"==e?".875em":e.replace("x","em")),Z([Z({float:o,width:i,height:"1em","line-height":a,"font-size":s,"text-align":l,"vertical-align":c,"transform-origin":"center",overflow:"visible"}),t])}(c,f,m,d)),4063232&t.$$.dirty&&n(10,a=function(t,e,n,r,o,i=1,a="",s=""){let l=1,c=1;return o&&("horizontal"==o?l=-1:"vertical"==o?c=-1:l=c=-1),Z([`translate(${Q(e)*i}${a},${Q(n)*i}${a})`,`scale(${l*Q(t)},${c*Q(t)})`,r&&`rotate(${r}${s})`]," ")}(_,h,g,w,b,512))},[l,p,x,v,C,k,S,r,o,i,a,s,c,u,f,d,m,_,h,g,w,b,y,$]}class it extends O{constructor(t){super(),V(this,t,ot,rt,i,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}
/*!
     * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     */var at={prefix:"fas",iconName:"bolt",icon:[320,512,[],"f0e7","M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"]},st={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"]},lt={prefix:"fas",iconName:"pause",icon:[448,512,[],"f04c","M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"]},ct={prefix:"fas",iconName:"play",icon:[448,512,[],"f04b","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"]},ut={prefix:"fas",iconName:"share",icon:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"]},ft={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]};function pt(t){let e,n,i,a,f,w,b,y,$,x,v,C,k,S,A,L,R,M,B,j,U,V,O,T,I,H,N,D,W,Y,X,G,K,Q,Z,tt,et,nt,rt,ot,pt,dt,mt,_t,ht,gt,wt;return H=new J({props:{}}),t[19](H),Y=new it({props:{icon:t[5]?lt:ct,size:"1.5x",color:"white"}}),Q=new it({props:{icon:at,size:"1.5x",color:t[6]?"white":"grey"}}),nt=new it({props:{icon:ft,size:"1.5x",color:"white"}}),pt=new it({props:{icon:ut,size:"1.5x",color:"white"}}),_t=new it({props:{icon:st,size:"1.5x",color:"white"}}),{c(){var r,o,s;e=d(),n=u("main"),i=u("div"),a=u("div"),f=u("div"),w=p("Iteration: "),b=p(t[8]),y=d(),$=u("div"),x=u("p"),x.textContent=" α:",v=d(),C=u("input"),k=d(),S=u("p"),S.textContent=" β:",A=d(),L=u("input"),R=d(),M=u("p"),M.textContent=" γ:",B=d(),j=u("input"),U=d(),V=u("p"),V.textContent="αr:",O=d(),T=u("input"),I=d(),P(H.$$.fragment),N=d(),D=u("div"),W=u("button"),P(Y.$$.fragment),G=d(),K=u("button"),P(Q.$$.fragment),tt=d(),et=u("button"),P(nt.$$.fragment),rt=d(),ot=u("button"),P(pt.$$.fragment),dt=d(),mt=u("button"),P(_t.$$.fragment),document.title="Snowflake Simulation",r="margin-bottom",o="0.3em",f.style.setProperty(r,o,s?"important":""),_(x,"class","svelte-4lfqje"),_(C,"type","number"),C.disabled=t[7],_(C,"title","Alpha (Vapor Addition) parameter"),_(C,"class","svelte-4lfqje"),_(S,"class","svelte-4lfqje"),_(L,"type","number"),L.disabled=t[7],_(L,"title","Beta (Background Vapor) parameter"),_(L,"class","svelte-4lfqje"),_(M,"class","svelte-4lfqje"),_(j,"type","number"),j.disabled=t[7],_(j,"title","Gamma (Vapor Diffusion) parameter"),_(j,"class","svelte-4lfqje"),_(V,"class","svelte-4lfqje"),_(T,"type","number"),T.disabled=t[7],_(T,"title","Alpha (Vapor Addition) randomization parameter, in percent"),_(T,"class","svelte-4lfqje"),_($,"id","paraminputs"),_($,"class","svelte-4lfqje"),_(a,"id","siminfo"),_(a,"class","svelte-4lfqje"),_(W,"title",X=t[5]?"Pause Simulation":"Start Simulation"),_(W,"class","svelte-4lfqje"),_(K,"title",Z=t[6]?"Slow down Simulation":"Speedup Simulation"),_(K,"class","svelte-4lfqje"),_(et,"title","Reset Simulation"),_(et,"class","svelte-4lfqje"),_(ot,"title","Share Simulation by URL"),_(ot,"class","svelte-4lfqje"),_(mt,"title","Download image of Simulation"),_(mt,"class","svelte-4lfqje"),_(D,"id","controls"),_(D,"class","svelte-4lfqje"),_(i,"id","column"),_(i,"class","svelte-4lfqje"),_(n,"class","svelte-4lfqje")},m(r,c){l(r,e,c),l(r,n,c),s(n,i),s(i,a),s(a,f),s(f,w),s(f,b),s(a,y),s(a,$),s($,x),s($,v),s($,C),g(C,t[0]),s($,k),s($,S),s($,A),s($,L),g(L,t[1]),s($,R),s($,M),s($,B),s($,j),g(j,t[2]),s($,U),s($,V),s($,O),s($,T),g(T,t[3]),s(i,I),z(H,i,null),s(i,N),s(i,D),s(D,W),z(Y,W,null),s(D,G),s(D,K),z(Q,K,null),s(D,tt),s(D,et),z(nt,et,null),s(D,rt),s(D,ot),z(pt,ot,null),s(D,dt),s(D,mt),z(_t,mt,null),ht=!0,gt||(wt=[m(C,"input",t[15]),m(L,"input",t[16]),m(j,"input",t[17]),m(T,"input",t[18]),m(W,"click",t[9]),m(K,"click",t[10]),m(et,"click",t[11]),m(ot,"click",t[12]),m(mt,"click",(function(){o(t[4].screenshot())&&t[4].screenshot().apply(this,arguments)}))],gt=!0)},p(e,[n]){t=e,(!ht||256&n)&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(b,t[8]),(!ht||128&n)&&(C.disabled=t[7]),1&n&&h(C.value)!==t[0]&&g(C,t[0]),(!ht||128&n)&&(L.disabled=t[7]),2&n&&h(L.value)!==t[1]&&g(L,t[1]),(!ht||128&n)&&(j.disabled=t[7]),4&n&&h(j.value)!==t[2]&&g(j,t[2]),(!ht||128&n)&&(T.disabled=t[7]),8&n&&h(T.value)!==t[3]&&g(T,t[3]);H.$set({});const r={};32&n&&(r.icon=t[5]?lt:ct),Y.$set(r),(!ht||32&n&&X!==(X=t[5]?"Pause Simulation":"Start Simulation"))&&_(W,"title",X);const o={};64&n&&(o.color=t[6]?"white":"grey"),Q.$set(o),(!ht||64&n&&Z!==(Z=t[6]?"Slow down Simulation":"Speedup Simulation"))&&_(K,"title",Z)},i(t){ht||(F(H.$$.fragment,t),F(Y.$$.fragment,t),F(Q.$$.fragment,t),F(nt.$$.fragment,t),F(pt.$$.fragment,t),F(_t.$$.fragment,t),ht=!0)},o(t){E(H.$$.fragment,t),E(Y.$$.fragment,t),E(Q.$$.fragment,t),E(nt.$$.fragment,t),E(pt.$$.fragment,t),E(_t.$$.fragment,t),ht=!1},d(o){o&&c(e),o&&c(n),t[19](null),q(H),q(Y),q(Q),q(nt),q(pt),q(_t),gt=!1,r(wt)}}}let dt;function mt(t,e,n){let r,o,{snowflakeSimLib:i}=e,a=!1,s=!1,l=!1,c=0,u=100,f=100,p=1,d=.4,m=1e-4,_=0,g=BigInt(34917983469832),w=null,b=!1;function $(){if(0==c&&r.init_tracking(),s){const t=performance.now();let e=0;for(;e<=1/60*1e3;)v(),e=performance.now()-t}else v();o.renderFrame(),a&&requestAnimationFrame($)}function v(){l?(r.step_simulation_playback(),k()):r.step_simulation(),r.update_vertex_colors(),o.updateColorBuffer(r.get_vertex_colors()),n(8,c+=1)}function C(){n(5,a=!1),n(14,r=i.SnowflakeSimContext.new(u,f,p,d,m)),r.set_random_seed(g),r.set_cell(u/2+1,f/2,1),r.set_alpha_rand(.3),r.set_transparent_background(b),r.create_vertex_positions(),r.update_vertex_colors(),o.setSimSize(u,f),o.updatePositionBuffer(r.get_vertex_positions()),o.updateColorBuffer(r.get_vertex_colors()),l&&(r.init_playback(w),k()),o.renderFrame()}function k(){n(0,p=r.get_alpha()),n(1,d=r.get_beta()),n(2,m=r.get_gamma()),n(3,_=r.get_alpha_rand())}return y((()=>{!function(){const t=new URLSearchParams(location.search);if(null!=t.get("size")){let e=t.get("size").split("x");u=e[0],f=e[1]}null!=t.get("seed")&&(g=t.get("seed"));null!=t.get("preset")&&(w=t.get("preset"),n(7,l=!0));if(null!=t.get("color")){let e=t.get("color");o.setSimColor(e)}null!=t.get("transparent")&&(b=!0)}(),C()})),t.$$set=t=>{"snowflakeSimLib"in t&&n(13,i=t.snowflakeSimLib)},t.$$.update=()=>{16385&t.$$.dirty&&r&&r.set_alpha(p),16386&t.$$.dirty&&r&&r.set_beta(d),16388&t.$$.dirty&&r&&r.set_gamma(m),16392&t.$$.dirty&&r&&r.set_alpha_rand(_),16384&t.$$.dirty&&r&&r.set_beta_rand(0),16384&t.$$.dirty&&r&&r.set_gamma_rand(0)},[p,d,m,_,o,a,s,l,c,function(){n(5,a=!a),a&&requestAnimationFrame($)},function(){n(6,s=!s)},C,function(){if(!r)return;0==c&&r.init_tracking();var t=r.get_simulation_string_repr();let e=location.href;e=e.includes("?")?e+"&preset="+t:e+"?preset="+t,console.log("Simulation url: "+e),navigator.clipboard.writeText(e).then((function(){console.log("Copied simulation URL to clipboard")}),(function(t){console.error("Could not copy text: ",t)}))},i,r,function(){p=h(this.value),n(0,p)},function(){d=h(this.value),n(1,d)},function(){m=h(this.value),n(2,m)},function(){_=h(this.value),n(3,_)},function(t){x[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class _t extends O{constructor(t){super(),V(this,t,mt,pt,i,{snowflakeSimLib:13})}}const ht=new Array(32).fill(void 0);function gt(t){return ht[t]}ht.push(void 0,null,!0,!1);let wt=ht.length;function bt(t){const e=gt(t);return function(t){t<36||(ht[t]=wt,wt=t)}(t),e}let yt=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});yt.decode();let $t=null;function xt(){return null!==$t&&$t.buffer===dt.memory.buffer||($t=new Uint8Array(dt.memory.buffer)),$t}function vt(t,e){return yt.decode(xt().subarray(t,t+e))}function Ct(t){wt===ht.length&&ht.push(ht.length+1);const e=wt;return wt=ht[e],ht[e]=t,e}let kt=0,St=new TextEncoder("utf-8");const At="function"==typeof St.encodeInto?function(t,e){return St.encodeInto(t,e)}:function(t,e){const n=St.encode(t);return e.set(n),{read:t.length,written:n.length}};let Lt=null;function Rt(){return null!==Lt&&Lt.buffer===dt.memory.buffer||(Lt=new Int32Array(dt.memory.buffer)),Lt}const Mt=new Uint32Array(2),Bt=new BigUint64Array(Mt.buffer);class jt{static __wrap(t){const e=Object.create(jt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();dt.__wbg_snowflakesimcontext_free(t)}static new(t,e,n,r,o){var i=dt.snowflakesimcontext_new(t,e,n,r,o);return jt.__wrap(i)}set_cell(t,e,n){dt.snowflakesimcontext_set_cell(this.ptr,t,e,n)}step_simulation(){dt.snowflakesimcontext_step_simulation(this.ptr)}init_tracking(){dt.snowflakesimcontext_init_tracking(this.ptr)}init_playback(t){var e=function(t,e,n){if(void 0===n){const n=St.encode(t),r=e(n.length);return xt().subarray(r,r+n.length).set(n),kt=n.length,r}let r=t.length,o=e(r);const i=xt();let a=0;for(;a<r;a++){const e=t.charCodeAt(a);if(e>127)break;i[o+a]=e}if(a!==r){0!==a&&(t=t.slice(a)),o=n(o,r,r=a+3*t.length);const e=xt().subarray(o+a,o+r);a+=At(t,e).written}return kt=a,o}(t,dt.__wbindgen_malloc,dt.__wbindgen_realloc),n=kt;dt.snowflakesimcontext_init_playback(this.ptr,e,n)}step_simulation_playback(){dt.snowflakesimcontext_step_simulation_playback(this.ptr)}get_simulation_string_repr(){try{const n=dt.__wbindgen_add_to_stack_pointer(-16);dt.snowflakesimcontext_get_simulation_string_repr(n,this.ptr);var t=Rt()[n/4+0],e=Rt()[n/4+1];return vt(t,e)}finally{dt.__wbindgen_add_to_stack_pointer(16),dt.__wbindgen_free(t,e)}}create_vertex_positions(){dt.snowflakesimcontext_create_vertex_positions(this.ptr)}get_vertex_count(){return dt.snowflakesimcontext_get_vertex_count(this.ptr)>>>0}update_vertex_colors(){dt.snowflakesimcontext_update_vertex_colors(this.ptr)}get_vertex_positions(){return bt(dt.snowflakesimcontext_get_vertex_positions(this.ptr))}get_vertex_colors(){return bt(dt.snowflakesimcontext_get_vertex_colors(this.ptr))}set_alpha(t){dt.snowflakesimcontext_set_alpha(this.ptr,t)}set_beta(t){dt.snowflakesimcontext_set_beta(this.ptr,t)}set_gamma(t){dt.snowflakesimcontext_set_gamma(this.ptr,t)}set_alpha_rand(t){dt.snowflakesimcontext_set_alpha_rand(this.ptr,t)}set_beta_rand(t){dt.snowflakesimcontext_set_beta_rand(this.ptr,t)}set_gamma_rand(t){dt.snowflakesimcontext_set_gamma_rand(this.ptr,t)}set_random_seed(t){Bt[0]=t;const e=Mt[0],n=Mt[1];dt.snowflakesimcontext_set_random_seed(this.ptr,e,n)}set_transparent_background(t){dt.snowflakesimcontext_set_transparent_background(this.ptr,t)}get_alpha(){return dt.snowflakesimcontext_get_alpha(this.ptr)}get_beta(){return dt.snowflakesimcontext_get_beta(this.ptr)}get_gamma(){return dt.snowflakesimcontext_get_gamma(this.ptr)}get_alpha_rand(){return dt.snowflakesimcontext_get_alpha_rand(this.ptr)}get_seed(){try{const n=dt.__wbindgen_add_to_stack_pointer(-16);dt.snowflakesimcontext_get_seed(n,this.ptr);var t=Rt()[n/4+0],e=Rt()[n/4+1];Mt[0]=t,Mt[1]=e;return Bt[0]}finally{dt.__wbindgen_add_to_stack_pointer(16)}}}async function Ft(t){void 0===t&&(t=new URL("index_bg.wasm",document.currentScript&&document.currentScript.src||new URL("bundle.js",document.baseURI).href));const e={wbg:{}};e.wbg.__wbindgen_object_drop_ref=function(t){bt(t)},e.wbg.__wbg_buffer_397eaa4d72ee94dd=function(t){return Ct(gt(t).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_8bd669b4092b7244=function(t,e,n){return Ct(new Float32Array(gt(t),e>>>0,n>>>0))},e.wbg.__wbg_new_8b45a9becdb89691=function(t){return Ct(new Float32Array(gt(t)))},e.wbg.__wbindgen_throw=function(t,e){throw new Error(vt(t,e))},e.wbg.__wbindgen_memory=function(){return Ct(dt.memory)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return dt=n.exports,Ft.__wbindgen_wasm_module=r,dt}var Et=Object.freeze({__proto__:null,SnowflakeSimContext:jt,default:Ft});(async()=>{const t=await(async(t={})=>{let{importHook:e,serverPath:n}=t,r="./build/assets/snowflake-sim-4c896f8d.wasm";return null!=n&&(r=n+/[^\/\\]*$/.exec(r)[0]),null!=e&&(r=e(r)),await Ft(r),Et})();new _t({target:document.body,props:{snowflakeSimLib:t}})})()}();
//# sourceMappingURL=bundle.js.map
